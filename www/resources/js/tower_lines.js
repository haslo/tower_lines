// Generated by CoffeeScript 1.8.0
(function() {
  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  this.TowerLines = (function() {
    function TowerLines() {
      this.initWorld = __bind(this.initWorld, this);
      this.initGame = __bind(this.initGame, this);
      this.create = __bind(this.create, this);
      this.resizeGame = __bind(this.resizeGame, this);
      this.onDeviceReady = __bind(this.onDeviceReady, this);
    }

    TowerLines.prototype.initialize = function() {
      return this.bindEvents(this);
    };

    TowerLines.prototype.bindEvents = function() {
      return document.addEventListener('deviceready', this.onDeviceReady, false);
    };

    TowerLines.prototype.onDeviceReady = function() {
      var dips, height, width;
      width = document.body.offsetWidth;
      height = Math.max($(document).height(), $(window).height());
      dips = window.devicePixelRatio;
      this.game = new Phaser.Game(width * dips, height * dips, Phaser.AUTO, '', {
        create: this.create
      });
      return $(window).resize((function(_this) {
        return function() {
          return _this.resizeGame(_this);
        };
      })(this));
    };

    TowerLines.prototype.resizeGame = function() {
      var height, width;
      height = $(window).height();
      width = $(window).width();
      this.game.width = width;
      this.game.height = height;
      if (this.game.renderType === Phaser.WEBGL) {
        this.game.renderer.resize(width, height);
      }
      return this.world.draw();
    };

    TowerLines.prototype.create = function() {
      this.initGame();
      return this.initWorld();
    };

    TowerLines.prototype.initGame = function() {
      var callback;
      this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
      this.game.scale.setShowAll();
      this.game.physics.startSystem(Phaser.Physics.ARCADE);
      callback = function(scale, prevOrientation) {
        return alert(prevOrientation);
      };
      return this.game.scale.onOrientationChange.add(callback);
    };

    TowerLines.prototype.initWorld = function() {
      this.world = new World(new DefaultMap(this.game), window.devicePixelRatio);
      this.world.add(new DefaultTower(0));
      this.world.add(new DefaultTower(1));
      return this.world.draw();
    };

    return TowerLines;

  })();

}).call(this);
